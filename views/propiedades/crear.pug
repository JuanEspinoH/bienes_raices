extends ../layout/admin

block styles
    link(rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css")

block contenido
    div(class="py-10")
        h1.text-4xl.my-10.font-extrabold.text-center Bienes
            span.font-normal Raices
        h2.text-center.text-2xl.font-extrabold=pagina
            div(id="geoErrorContainer" class="max-w-md mx-auto my-10 bg-red-600 hidden")
                    p(class= "text-white uppercase text-xs text-center placeholder p-2 mn-1 font-bold") Permite al navegador saber tu localizacion para mejor la experiencia de usuario.
        if errores
            div(class="max-w-md mx-auto my-10 bg-red-600")
                each error in errores
                    p(class= "text-white uppercase text-xs text-center placeholder p-2 mn-1 font-bold")=error.msg
        if exito
            div(class="max-w-md mx-auto my-10 bg-green-600 text-white")
                p(class=" text-white uppercase text-xs text-center placeholder p-2 mn-1 font-bold") Propiedad creada exitosamente


        div(class="bg-white shadow py-8 px-4 rounded mx-auto max-w-4xl my-10 md:px-10")
            form(class="space-y-8" method="POST" action="/propiedades/crear" novalidate)
                input(type="hidden" name="_csrf" value=csrfToken)
                div(class="space-y-8")
                    h3(class="text-lg leading-6 font-medium text-gray-900") Informacion General
                    p(class="text-gray-600") AÃ±ade Informacion sobre la propiedad en venta

                div
                    label.block.text-sm.uppercase.text-gray-500.mb-2.font-bold(for="titulo" ) Titulo de Anuncio
                    input#titulo.w-full.px-3.py-2.border.border-gray-300.rounded-md.placeholder-gray-400( placeholder="Titulo Propiedad, ej. Casa en la Playa" type="text" name="titulo" value=data.titulo ?  data.titulo : ""
                        )
                div
                    label.block.text-sm.uppercase.text-gray-500.mb-3.font-bold(for="descripcion" ) Descripcion
                    input#descripcion.w-full.px-3.py-2.border.border-gray-300.rounded-md.placeholder-gray-400( placeholder="Descripcion de la Propiedad" type="text" name="descripcion"
                    value=data ?  data.descripcion : ""
                        )
                
                div(class="md:flex md:gap-4  ")
       
                    div(class="md:w-1/2  ")
                        label.block.text-sm.uppercase.text-gray-500.mb-2.font-bold(for="categoria" ) Categoria
                        select#categoria.w-full.px-3.py-2.border.border-gray-300.rounded-md.placeholder-gray-400(name="categoria")
                            option(value="") -Seleccione-
                            each categoria in categorias
                                option(value=categoria.nombre selected=data.categoria ? data.categoria ==categoria.nombre ? true :false :null) #{categoria.nombre}

                    div(class="md:w-1/2  ")
                        label.block.text-sm.uppercase.text-gray-500.mb-2.font-bold(for="precio" ) Precio
                        select#precio.w-full.px-3.py-2.border.border-gray-300.rounded-md.placeholder-gray-400(name="precio")
                            option(value="") -Seleccione-
                            each precio in precios
                                option(value=precio.nombre selected=data.precio ? data.precio ==precio.nombre ? true :false :null ) #{precio.nombre}
 

                div(class="md:flex md:gap-4  ")
       
                    div(class="md:w-1/3")
                        label.block.text-sm.uppercase.text-gray-500.mb-2.font-bold(for="habitaciones" ) Habitaciones
                        select#habitaciones.w-full.px-3.py-2.border.border-gray-300.rounded-md.placeholder-gray-400(  name="habitaciones")
                            option(value="") -Seleccione-
                            - let n1=1;
                                while n1 < 10
                                    option(value=n1 selected=data.habitaciones ? data.habitaciones ==n1 ? true :false :null ) #{n1++}
                    
                    div(class="md:w-1/3")
                        label.block.text-sm.uppercase.text-gray-500.mb-2.font-bold(for="estacionamiento" ) Estacionamiento
                        select#estacionamiento.w-full.px-3.py-2.border.border-gray-300.rounded-md.placeholder-gray-400( name="estacionamiento")
                            option(value="" ) -Seleccione-
                            - let n2=1;
                                while n2 < 4
                                    option(value=n2 selected=data.estacionamiento ? data.estacionamiento ==n2 ? true :false :null) #{n2++}

                    div(class="md:w-1/3")
                        label.block.text-sm.uppercase.text-gray-500.mb-2.font-bold(for="wc" ) WC
                        select#wc.w-full.px-3.py-2.border.border-gray-300.rounded-md.placeholder-gray-400( name="wc")
                            option(value="") -Seleccione-
                            - let n3=1;
                                while n3 < 4
                                    option(value=n3 selected=data.wc ? data.wc ==n3 ? true :false :null) #{n3++}
                div(class="border-gray-200 border-t py-5 space-y-5")
                    h3(class="text-lg leading-6 font-medium text-gray-900") Ubicacion
                    p(class="text-gray-600") Ubica la propiedad en el mapa
                    p(class="text-gray-600") Click en el pointer para ver al direccion
                    #mapa(class="h-96 mt-6")

                    div
                        p.calle=data.calle ? data.calle : ""
                    
                    input(type="hidden" name="calle" id="calle" value=data.calle ? data.calle : "")
                    input(type="hidden" name="lat" id="lat" value=data.lat ? data.lat : "")
                    input(type="hidden" name="lng" id="lng" value=data.lng ? data.lng : "")
                //- button(type="submit" class="w-full bg-blue-500") Dar de alta
                input(type="submit" value="Crear Cuenta" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 cursor-pointer") 

block scripts
    script(src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js")
    script(src="https://unpkg.com/esri-leaflet@3.0.8/dist/esri-leaflet.js")
    script(src="https://unpkg.com/esri-leaflet-geocoder@2.2.13/dist/esri-leaflet-geocoder.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-geosearch/2.7.0/bundle.min.js")
    script(src="/js/mapa.js")


